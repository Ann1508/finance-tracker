// client/src/components/FinancialTip.jsx
import React, { useState, useEffect } from 'react';

const FINANCIAL_TIPS = [
  {
    title: "–ü—Ä–∞–≤–∏–ª–æ 50/30/20",
    text: "–†–∞—Å–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ –¥–æ—Ö–æ–¥—ã: 50% –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ, 30% –Ω–∞ –∂–µ–ª–∞–µ–º–æ–µ, 20% –Ω–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –∏ –ø–æ–≥–∞—à–µ–Ω–∏–µ –¥–æ–ª–≥–æ–≤.",
    icon: "üìä"
  },
  {
    title: "–§–æ–Ω–¥ –Ω–∞ —á–µ—Ä–Ω—ã–π –¥–µ–Ω—å",
    text: "–°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤ –Ω–∞ 3-6 –º–µ—Å—è—Ü–µ–≤ —Ä–∞—Å—Ö–æ–¥–æ–≤. –≠—Ç–æ –≤–∞—à–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–æ–¥—É—à–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.",
    icon: "üõ°Ô∏è"
  },
  {
    title: "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π",
    text: "–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ —á–∞—Å—Ç–∏ –∑–∞—Ä–ø–ª–∞—Ç—ã –Ω–∞ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–π —Å—á–µ—Ç –≤ –¥–µ–Ω—å –ø–æ–ª—É—á–µ–Ω–∏—è.",
    icon: "ü§ñ"
  },
  {
    title: "–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –º–µ–ª–∫–∏–µ —Ç—Ä–∞—Ç—ã",
    text: "–ö–æ—Ñ–µ, –ø–µ—Ä–µ–∫—É—Å—ã, –ø–æ–¥–ø–∏—Å–∫–∏ ‚Äì —ç—Ç–∏ –º–µ–ª–æ—á–∏ –º–æ–≥—É—Ç —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å –¥–æ 20% –≤–∞—à–µ–≥–æ –±—é–¥–∂–µ—Ç–∞.",
    icon: "‚òï"
  },
  {
    title: "–ü—Ä–∞–≤–∏–ª–æ 24 —á–∞—Å–æ–≤",
    text: "–ü–µ—Ä–µ–¥ –∫—Ä—É–ø–Ω–æ–π –ø–æ–∫—É–ø–∫–æ–π –ø–æ–¥–æ–∂–¥–∏—Ç–µ —Å—É—Ç–∫–∏. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –∏–º–ø—É–ª—å—Å–∏–≤–Ω—ã—Ö —Ç—Ä–∞—Ç.",
    icon: "‚è∞"
  },
  {
    title: "–ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ —Å–µ–±—è",
    text: "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ –Ω–∞–≤—ã–∫–æ–≤ ‚Äì –ª—É—á—à–∞—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è —Å —Å–∞–º–æ–π –≤—ã—Å–æ–∫–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é.",
    icon: "üìö"
  },
  {
    title: "–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è",
    text: "–ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –≤—Å–µ –¥–µ–Ω—å–≥–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ. –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –∞–∫—Ç–∏–≤–∞–º–∏.",
    icon: "üéØ"
  },
  {
    title: "–ù–∞—á–Ω–∏—Ç–µ —Ä–∞–Ω–æ",
    text: "–î–∞–∂–µ –Ω–µ–±–æ–ª—å—à–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –≤ –º–æ–ª–æ–¥–æ—Å—Ç–∏ –ø—Ä–µ–≤—Ä–∞—Ç—è—Ç—Å—è –≤ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–ª–æ–∂–Ω–æ–º—É –ø—Ä–æ—Ü–µ–Ω—Ç—É.",
    icon: "üå±"
  },
  {
    title: "–ü–µ—Ä–µ—Å–º–æ—Ç—Ä –ø–æ–¥–ø–∏—Å–æ–∫",
    text: "–†–∞–∑ –≤ –∫–≤–∞—Ä—Ç–∞–ª –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏. –û—Ç–º–µ–Ω–∏—Ç–µ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–º–∏ –Ω–µ –ø–æ–ª—å–∑—É–µ—Ç–µ—Å—å.",
    icon: "üì±"
  },
  {
    title: "–≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ –Ω–∞–ª–æ–≥–∞—Ö",
    text: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–ª–æ–≥–æ–≤—ã–µ –≤—ã—á–µ—Ç—ã: –Ω–∞ –ª–µ—á–µ–Ω–∏–µ, –æ–±—É—á–µ–Ω–∏–µ, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏. –≠—Ç–æ –∑–∞–∫–æ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –≤–µ—Ä–Ω—É—Ç—å –¥–µ–Ω—å–≥–∏.",
    icon: "üí∞"
  },
  {
    title: "–ú–µ—Ç–æ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–æ–≤",
    text: "–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –Ω–∞–ª–∏—á–Ω—ã–µ –ø–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞–º –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ –º–µ—Å—è—Ü.",
    icon: "‚úâÔ∏è"
  },
  {
    title: "–ì–æ—Ç–æ–≤—å—Ç–µ –¥–æ–º–∞",
    text: "–î–æ–º–∞—à–Ω—è—è –µ–¥–∞ –≤ 3-5 —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏. –≠–∫–æ–Ω–æ–º–∏—è –¥–æ 15 000‚ÇΩ –≤ –º–µ—Å—è—Ü.",
    icon: "üç≥"
  },
  {
    title: "–°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Ü–µ–Ω—ã",
    text: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ü–µ–Ω –ø–µ—Ä–µ–¥ –ø–æ–∫—É–ø–∫–∞–º–∏. –†–∞–∑–Ω–∏—Ü–∞ –º–æ–∂–µ—Ç –¥–æ—Å—Ç–∏–≥–∞—Ç—å 30%.",
    icon: "üîç"
  },
  {
    title: "–≠–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å",
    text: "LED-–ª–∞–º–ø—ã, —Ç–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ç–æ—Ä—ã, –∫–ª–∞—Å—Å A++ —Ç–µ—Ö–Ω–∏–∫–∏ ‚Äì –æ–∫—É–ø—è—Ç—Å—è –∑–∞ –≥–æ–¥ –∏ —Å–Ω–∏–∑—è—Ç —Å—á–µ—Ç–∞.",
    icon: "üí°"
  },
  {
    title: "–ö–µ—à–±—ç–∫ –∏ –±–æ–Ω—É—Å—ã",
    text: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—Ä—Ç—ã —Å –∫–µ—à–±—ç–∫–æ–º –∏ –∫–æ–ø–∏—Ç–µ –±–∞–ª–ª—ã. –ù–æ –Ω–µ —Ç—Ä–∞—Ç—å—Ç–µ –±–æ–ª—å—à–µ —Ä–∞–¥–∏ –±–æ–Ω—É—Å–æ–≤!",
    icon: "üéÅ"
  },
  {
    title: "–°–ø–∏—Å–∫–∏ –ø–æ–∫—É–ø–æ–∫",
    text: "–•–æ–¥–∏—Ç–µ –≤ –º–∞–≥–∞–∑–∏–Ω —Å–æ —Å–ø–∏—Å–∫–æ–º –∏ –Ω–∞ —Å—ã—Ç—ã–π –∂–µ–ª—É–¥–æ–∫. –≠—Ç–æ —Å–Ω–∏–∑–∏—Ç –∏–º–ø—É–ª—å—Å–∏–≤–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏ –Ω–∞ 40%.",
    icon: "üìù"
  },
  {
    title: "–û—Ç–∫–∞–∂–∏—Ç–µ—Å—å –æ—Ç –∫—Ä–µ–¥–∏—Ç–æ–≤",
    text: "–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏–µ –∫—Ä–µ–¥–∏—Ç—ã ‚Äì –ø—É—Ç—å –∫ –¥–æ–ª–≥–æ–≤–æ–π —è–º–µ. –ù–∞–∫–æ–ø–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞, –∫—É–ø–∏—Ç–µ –ø–æ—Ç–æ–º.",
    icon: "üö´"
  },
  {
    title: "–ê–Ω–∞–ª–∏–∑ —á–µ–∫–æ–≤",
    text: "–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –≤—ã–ø–∏—Å–∫–∏ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é. –í—ã —É–¥–∏–≤–∏—Ç–µ—Å—å, –∫—É–¥–∞ —É—Ö–æ–¥—è—Ç –¥–µ–Ω—å–≥–∏.",
    icon: "üßæ"
  },
  {
    title: "–ß–µ–ª–ª–µ–Ω–¥–∂ –Ω–∞ –º–µ—Å—è—Ü",
    text: "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –º–µ—Å—è—Ü –Ω–µ –ø–æ–∫—É–ø–∞—Ç—å –Ω–∏—á–µ–≥–æ, –∫—Ä–æ–º–µ –µ–¥—ã –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ. –í—ã —É–¥–∏–≤–∏—Ç–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É!",
    icon: "üèÜ"
  },
  {
    title: "–ò–Ω—Ñ–ª—è—Ü–∏—è ‚Äì –≤–∞—à –≤—Ä–∞–≥",
    text: "–î–µ–Ω—å–≥–∏ –Ω–∞ –æ–±—ã—á–Ω–æ–º —Å—á–µ—Ç–µ –æ–±–µ—Å—Ü–µ–Ω–∏–≤–∞—é—Ç—Å—è. –ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ö–æ—Ç—è –±—ã –≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—ã—à–µ –∏–Ω—Ñ–ª—è—Ü–∏–∏.",
    icon: "üìâ"
  }
];

export default function FinancialTip() {
  const [isExpanded, setIsExpanded] = useState(false);
  const [currentTip, setCurrentTip] = useState(null);

  useEffect(() => {
    // –ü–æ–ª—É—á–∞–µ–º —Å–æ–≤–µ—Ç –¥–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞—Ç—ã
    const today = new Date().toDateString();
    const savedDate = localStorage.getItem('financialTipDate');
    
    if (savedDate !== today) {
      // –ù–æ–≤—ã–π –¥–µ–Ω—å - –≤—ã–±–∏—Ä–∞–µ–º –Ω–æ–≤—ã–π —Å–æ–≤–µ—Ç
      const randomIndex = Math.floor(Math.random() * FINANCIAL_TIPS.length);
      setCurrentTip(FINANCIAL_TIPS[randomIndex]);
      localStorage.setItem('financialTipDate', today);
      localStorage.setItem('financialTipIndex', randomIndex.toString());
    } else {
      // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —Å–æ–≤–µ—Ç
      const savedIndex = parseInt(localStorage.getItem('financialTipIndex') || '0');
      setCurrentTip(FINANCIAL_TIPS[savedIndex]);
    }
  }, []);

  if (!currentTip) return null;

  return (
    <div
      className={`fixed bottom-6 right-6 z-40 transition-all duration-300 ${
        isExpanded ? 'w-96' : 'w-16'
      }`}
      onMouseEnter={() => setIsExpanded(true)}
      onMouseLeave={() => setIsExpanded(false)}
    >
      <div
        className={`bg-gradient-to-br from-purple-600 to-indigo-600 rounded-2xl shadow-2xl overflow-hidden ${
          isExpanded ? 'p-6' : 'w-16 h-16 flex items-center justify-center'
        }`}
      >
        {!isExpanded ? (
          <div className="text-3xl animate-bounce">
            üí°
          </div>
        ) : (
          <div className="text-white space-y-3">
            <div className="flex items-center gap-3">
              <span className="text-3xl">{currentTip.icon}</span>
              <div>
                <div className="text-xs text-purple-200 uppercase tracking-wide">
                  –°–æ–≤–µ—Ç –¥–Ω—è
                </div>
                <h3 className="font-bold text-lg">{currentTip.title}</h3>
              </div>
            </div>
            
            <p className="text-sm text-purple-50 leading-relaxed">
              {currentTip.text}
            </p>

            <div className="flex items-center justify-between pt-2 border-t border-purple-400">
              <div className="text-xs text-purple-200">
                –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
              </div>
              <button
                onClick={() => setIsExpanded(false)}
                className="text-purple-200 hover:text-white transition-colors"
              >
                ‚úï
              </button>
            </div>
          </div>
        )}
      </div>

      {!isExpanded && (
        <div className="absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-pulse">
          !
        </div>
      )}
    </div>
  );
}